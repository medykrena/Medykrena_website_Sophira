<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Spenden – Sophira</title>

  <!-- SEO -->
  <link rel="canonical" href="https://sophira.ch/donate-de.html" />
  <meta name="robots" content="index,follow" />
  <meta name="description" content="Unterstützen Sie den Verein Sophira mit einer Spende. Ihr Beitrag ermöglicht Erwachsenen in der Schweiz eine berufliche Neuorientierung in zukunftsfähige Berufe." />

  <!-- Hreflang -->
  <link rel="alternate" hreflang="fr" href="https://sophira.ch/donate.html" />
  <link rel="alternate" hreflang="de" href="https://sophira.ch/donate-de.html" />
  <link rel="alternate" hreflang="x-default" href="https://sophira.ch/donate.html" />

  <!-- Open Graph -->
  <meta property="og:title" content="Spenden – Sophira" />
  <meta property="og:description" content="Spenden Sie an Sophira, einen Verein, der Erwachsene in der Schweiz bei der beruflichen Neuorientierung in zukunftsfähige Berufe unterstützt." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://sophira.ch/donate-de.html" />
  <meta property="og:image" content="https://sophira.ch/Logo_sophira.png" />
  <meta property="og:site_name" content="Sophira" />
  <meta property="og:locale" content="de_CH" />

  <!-- Social metas -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Spenden – Sophira" />
  <meta name="twitter:description" content="Unterstützen Sie den Verein Sophira mit einer Spende. Jede Unterstützung hilft Erwachsenen bei der beruflichen Neuorientierung." />
  <meta name="twitter:image" content="https://sophira.ch/Logo_sophira.png" />

  <!-- Schrift -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <!-- PayPal SDK (Hosted Buttons) -->
  <script
    src="https://www.paypal.com/sdk/js?client-id=BAAGxn8h3EeDctBRmrD3icvmvjwmWp-VYeWEr8D4OWJjvlgkqjMzsz4ZDr6WrdTtfMOxYDElsbG9NGJ4CA&components=hosted-buttons&disable-funding=venmo&currency=CHF">
  </script>

  <style>
    :root{
      --text:#2c3e50;
      --muted:#4a5568;
      --brand:#1a73e8;
      --brand-hover:#155ab6;
      --bg-overlay:rgba(255,255,255,0.95);
      --whiteglass:#ffffffdd;
      --radius:12px;
      --shadow-sm:0 2px 8px rgba(0,0,0,0.05);
      --shadow-md:0 4px 12px rgba(0,0,0,0.08);
      --container:960px;
      --ok:#065f46;
      --warn:#92400e;
      --panel:#f8fafc;
      --border:#e5e7eb;
    }
    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family:'Inter',sans-serif;
      background:url('mathew-schwartz-91ryOVMlBJc-unsplash.jpg') no-repeat center/cover fixed;
      color:var(--text);
    }

    .overlay{
      background-color:var(--bg-overlay);
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }

    /* Skip link */
    .skip-link{
      position:absolute;
      left:1rem;
      top:.5rem;
      transform:translateY(-200%);
      background:#000;
      color:#fff;
      padding:.6rem .9rem;
      border-radius:8px;
      text-decoration:none;
      z-index:1000;
      box-shadow:var(--shadow-sm);
    }
    .skip-link:focus,
    .skip-link:focus-visible{
      transform:translateY(0);
      outline:2px solid #fff;
    }

    header.navbar{
      position:sticky;
      top:0;
      z-index:20;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:.75rem;
      padding:.8rem 1rem;
      background:var(--whiteglass);
      box-shadow:var(--shadow-sm);
      backdrop-filter:blur(6px);
    }
    .brand{
      display:flex;
      align-items:center;
      gap:.6rem;
      text-decoration:none;
    }
    .brand img{ height:55px; }
    .brand h1{
      margin:0;
      font-size:1.7rem;
      font-weight:600;
      color:#1a202c;
    }

    nav.primary{
      display:flex;
      gap:1.1rem;
    }
    nav.primary a{
      text-decoration:none;
      color:var(--text);
      font-weight:500;
    }
    nav.primary a:hover,
    nav.primary a:focus{
      color:#1e88e5;
    }

    a:focus-visible,
    button:focus-visible{
      outline:3px solid #0d6efd;
      outline-offset:2px;
    }

    .burger{
      display:none;
      background:none;
      border:none;
      padding:.4rem .6rem;
    }
    .burger svg{ width:28px; height:28px; }

    .mobile-panel{
      display:none;
      position:fixed;
      inset:64px 0 0 0;
      background:#ffffffdd;
      backdrop-filter:blur(6px);
      padding:1rem;
    }
    .mobile-links{
      display:flex;
      flex-direction:column;
      gap:.8rem;
    }
    .mobile-links a{
      text-decoration:none;
      color:var(--text);
      font-weight:600;
      padding:.7rem 0;
      border-bottom:1px solid #ddd;
    }
    .mobile-links a:last-child{ border-bottom:none; }

    .hidden{ display:none !important; }

    @media(max-width:880px){
      nav.primary{ display:none; }
      .burger{ display:inline-flex; }
    }

    .container{
      flex:1;
      max-width:var(--container);
      margin:2rem auto;
      padding:0 1rem;
    }

    .content{
      background:#ffffffdd;
      padding:2rem;
      border-radius:var(--radius);
      box-shadow:var(--shadow-sm);
    }
    .content h2{
      text-align:center;
      margin-top:0;
      margin-bottom:.6rem;
    }

    .intro{
      text-align:center;
      max-width:720px;
      margin:0 auto 1.2rem;
      color:var(--muted);
      font-size:1rem;
    }

    .muted{ color:var(--muted); }

    .impact-list{
      margin:1.2rem auto 1.4rem;
      max-width:720px;
      padding-left:1.1rem;
      font-size:.98rem;
      color:var(--muted);
    }
    .impact-list li{ margin-bottom:.35rem; }

    .contact-info{
      margin-top:1.5rem;
      font-size:1rem;
    }

    .context{
      margin:1rem 0 0;
      padding:.9rem 1rem;
      border-radius:10px;
      border:1px solid #cbd5e1;
      background:#f1f5f9;
      color:#0f172a;
      display:none;
    }
    .context.ok{
      border-color:#a7f3d0;
      background:#ecfdf5;
      color:#064e3b;
    }
    .context.warn{
      border-color:#fed7aa;
      background:#fff7ed;
      color:#7c2d12;
    }

    /* Spenden-Block (PayPal) – bewusst zentriert & grösser */
    .donate-box{
      margin:2rem auto 0;              /* zentriert im Content-Container */
      padding:1.8rem 2.2rem;           /* etwas mehr Platz für den Button */
      border-radius:10px;
      border:1px solid var(--border);
      background:#fff;
      text-align:center;
      max-width:520px;                 /* begrenzte Breite für ein schönes, zentriertes Panel */
      box-shadow:var(--shadow-sm);
    }
    .donate-box h3{
      margin-top:0;
      margin-bottom:.6rem;
    }
    .donate-box p{
      margin:.3rem 0 .9rem;
      font-size:.95rem;
      color:var(--muted);
    }
    .donate-box small{
      display:block;
      font-size:.85rem;
      color:#6b7280;
      margin-top:.8rem;
      line-height:1.4;
    }
    .donate-amounts{
      margin:.6rem 0 1.2rem;
      display:flex;
      flex-wrap:wrap;
      justify-content:center;
      gap:.4rem;
      font-size:.9rem;
    }
    .donate-pill{
      padding:.25rem .7rem;
      border-radius:999px;
      border:1px solid #e5e7eb;
      background:#f9fafb;
      color:#374151;
      white-space:nowrap;
    }

    /* Geschütztes Telefon */
    .phone-box{
      margin:1.4rem 0 0;
      padding:.8rem 1rem;
      border:1px dashed var(--border);
      border-radius:10px;
      background:#fff;
    }
    .phone-note{
      color:var(--muted);
      font-size:.95rem;
      margin:.5rem 0 0;
    }
    .small{
      font-size:.92rem;
      color:#4b5563;
    }

    iframe{
      width:100%;
      height:350px;
      border:none;
      border-radius:var(--radius);
      margin-top:2rem;
    }

    .form-card{
      margin-top:1.2rem;
      background:#fff;
      border:1px solid #e5e7eb;
      border-radius:12px;
      box-shadow:var(--shadow-sm);
      padding:1rem;
    }
    form label{
      display:block;
      margin:.6rem 0 .25rem;
      font-weight:600;
    }
    input,
    textarea{
      width:100%;
      padding:.6rem .7rem;
      border:1px solid #d1d5db;
      border-radius:8px;
      font-family:inherit;
      font-size:1rem;
    }
    .actions{
      display:flex;
      gap:.6rem;
      flex-wrap:wrap;
      margin-top:.8rem;
    }
    .btn{
      display:inline-block;
      background:var(--brand);
      color:#fff;
      text-decoration:none;
      padding:.6rem 1.1rem;
      border-radius:8px;
      font-weight:700;
      border:none;
      cursor:pointer;
    }
    .btn:hover{ background:var(--brand-hover); }
    .btn.outline{
      background:transparent;
      color:var(--brand);
      border:2px solid var(--brand);
    }
    .btn.outline:hover{ background:#e8f0fe; }

    .phone-form{
      margin-top:.6rem;
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:.6rem;
      align-items:end;
    }
    .phone-form .wide{ grid-column:span 2; }
    @media(max-width:640px){
      .phone-form{
        grid-template-columns:1fr;
      }
      .phone-form .wide{ grid-column:auto; }
    }

    .social{
      margin-top:2rem;
      background:var(--panel);
      border:1px solid #e5e7eb;
      border-radius:12px;
      padding:1rem;
    }
    .social h3{ margin:.2rem 0 .6rem; }
    .social a{
      display:inline-block;
      margin-right:.6rem;
      text-decoration:none;
      font-weight:700;
    }
    .tiktok{ color:#000; }
    .linkedin{ color:#0a66c2; }

    footer{
      text-align:center;
      padding:1rem;
      margin-top:3rem;
      font-size:.95rem;
      color:#4a4a4a;
      background:var(--whiteglass);
      border-top-left-radius:var(--radius);
      border-top-right-radius:var(--radius);
    }
  </style>
</head>
<body>
  <!-- Skip-Link -->
  <a class="skip-link" href="#main">Zum Hauptinhalt springen</a>

  <div class="overlay">
    <header class="navbar">
      <a class="brand" href="index-de.html">
        <img src="Logo_sophira.png" alt="Sophira Logo" />
        <h1>Sophira</h1>
      </a>
      <nav class="primary" aria-label="Hauptlinks">
        <a href="index-de.html">Startseite</a>
        <a href="team-de.html">Team</a>
        <a href="project-de.html">Soziales Projekt</a>
        <a href="dashboard-de.html">Dashboard</a>
        <a href="blog.html">Blog</a>
        <a href="jobs/index-de.html">Job-Portal</a>
        <a href="contact-de.html">Kontakt</a>
      </nav>
      <button class="burger" id="burger" aria-label="Menü öffnen" aria-controls="menu-mobile" aria-expanded="false">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M3 6h18M3 12h18M3 18h18" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </header>

    <div id="menu-mobile" class="mobile-panel hidden" role="dialog" aria-modal="true" aria-label="Mobiles Menü">
      <div class="mobile-links">
        <a href="index-de.html">Startseite</a>
        <a href="team-de.html">Team</a>
        <a href="project-de.html">Soziales Projekt</a>
        <a href="dashboard-de.html">Dashboard</a>
        <a href="blog.html">Blog</a>
        <a href="jobs/index-de.html">Job-Portal</a>
        <a href="contact-de.html">Kontakt</a>
      </div>
    </div>

    <main id="main" class="container">
      <div class="content">
        <h2>Spenden</h2>

        <p class="intro">
          Mit Ihrer Spende ermöglichen Sie es Sophira, Erwachsene in der Schweiz bei der beruflichen Neuorientierung
          in zukunftsfähige Berufe (Daten, grüne Technologien, digitale Gesundheit, KI usw.) zu begleiten.
          Vielen Dank für Ihr Vertrauen und Ihre Unterstützung.
        </p>

        <ul class="impact-list" aria-label="Wirkung Ihrer Spende">
          <li>Teilfinanzierung von Kurs- und Prüfungsgebühren.</li>
          <li>Beitrag zur Grundausstattung (Laptop, Kopfhörer, Software, Internetzugang).</li>
          <li>Ermöglichen von persönlicher Begleitung: Mentoring, Coaching, Bewerbungsunterstützung.</li>
        </ul>

        <!-- Kontextbanner (bei URL-Parametern) -->
        <div id="ctx" class="context" role="status" aria-live="polite"></div>

        <!-- Spenden-Block mit PayPal -->
        <section class="donate-box" aria-label="Online-Spende">
          <h3>Online spenden</h3>
          <p>
            Die Zahlung erfolgt in CHF über PayPal. Sie können mit Kreditkarte oder Ihrem PayPal-Konto spenden.
          </p>

          <div class="donate-amounts" aria-hidden="true">
            <span class="donate-pill">CHF 20</span>
            <span class="donate-pill">CHF 50</span>
            <span class="donate-pill">CHF 100</span>
            <span class="donate-pill">Anderer Betrag</span>
          </div>

          <!-- Gehosteter PayPal-Button -->
          <div id="paypal-container-LYWSHNWSRDXYW"></div>
          <script>
            paypal.HostedButtons({
              hostedButtonId: "LYWSHNWSRDXYW",
            }).render("#paypal-container-LYWSHNWSRDXYW");
          </script>

          <small>
            Sie werden für die sichere Zahlungsabwicklung zu PayPal weitergeleitet.
            Falls der Button nicht angezeigt wird, können Sie Ihre Spende auch
            direkt über
            <a href="https://www.paypal.com/ncp/payment/LYWSHNWSRDXYW" target="_blank" rel="noopener">diese PayPal-Seite</a>
            tätigen.
          </small>

          <noscript>
            <p style="margin-top:0.8rem;font-size:0.9rem;">
              In Ihrem Browser ist JavaScript deaktiviert. Um zu spenden, öffnen Sie bitte
              <a href="https://www.paypal.com/ncp/payment/LYWSHNWSRDXYW" target="_blank" rel="noopener">diese PayPal-Seite</a>.
            </p>
          </noscript>
        </section>

        <!-- Verwendung der Spenden -->
        <section aria-label="Verwendung der Spenden" style="margin-top:1.8rem;">
          <h3>Wie Ihre Spende eingesetzt wird</h3>
          <p class="muted">
            Sophira ist ein gemeinnütziger Verein mit Sitz in Basel. Die Spenden werden ausschliesslich dafür verwendet,
            Erwachsene in der Schweiz bei einer nachhaltigen beruflichen Neuorientierung zu unterstützen.
          </p>
          <ul class="impact-list">
            <li><strong>Gezielte Stipendien:</strong> Beteiligung an Kurs- und Prüfungsgebühren.</li>
            <li><strong>Material & Zugang:</strong> Unterstützung bei digitaler Ausstattung und Lernressourcen.</li>
            <li><strong>Begleitung:</strong> Mentoring, Feedback zu Bewerbungen, Vorbereitung auf Interviews.</li>
          </ul>
          <p class="muted">
            Mehr über unsere Arbeit erfahren Sie auf der Seite
            <a href="project-de.html">Soziales Projekt</a> und darüber, wer wir sind, auf der Seite
            <a href="team-de.html">Team</a>.
          </p>
        </section>

        <div class="contact-info" aria-label="Kontaktdaten des Vereins">
          <p><strong>Adresse:</strong> Sandgrubenstrasse, 4058 Basel, Schweiz</p>
          <p><strong>E-Mail:</strong> association_sophira@protonmail.com</p>

          <!-- Geschütztes Telefon -->
          <div class="phone-box" aria-live="polite">
            <p style="margin:0;">
              <strong>Telefon:</strong>
              <span id="phone-mask">+41 ••• ••• •• ••</span>
              <button id="btn-reveal" class="btn outline" type="button" aria-controls="phone-request">
                Nummer anzeigen
              </button>
            </p>
            <p class="phone-note">
              Aus Anti-Spam-Gründen wird die Nummer <strong>nach dem Senden</strong> Ihres Namens und Ihrer E-Mail
              über das Formular unten angezeigt. Die Anzeige bleibt 30 Tage auf diesem Gerät aktiv.
            </p>

            <!-- Mini-Formular Netlify (AJAX) -->
            <form id="phone-request" name="sophira-phone-request" class="phone-form" method="POST" data-netlify="true" netlify-honeypot="bot-field">
              <input type="hidden" name="form-name" value="sophira-phone-request" />
              <p style="display:none"><label>Nicht ausfüllen: <input name="bot-field" /></label></p>

              <div>
                <label for="pr-name">Name und Vorname</label>
                <input id="pr-name" name="name" autocomplete="name" required />
              </div>
              <div>
                <label for="pr-email">E-Mail</label>
                <input id="pr-email" type="email" name="email" autocomplete="email" required />
              </div>
              <div class="wide">
                <label>
                  <input type="checkbox" id="pr-consent" name="consent" required />
                  Ich bin einverstanden, dass Sophira mich zu meiner Anfrage kontaktiert.
                </label>
              </div>
              <div class="wide actions">
                <button class="btn" type="submit">Senden & Nummer anzeigen</button>
                <button class="btn outline" type="button" id="pr-cancel">Abbrechen</button>
                <span id="pr-status" class="small" role="status" aria-live="polite"></span>
              </div>
            </form>
          </div>
        </div>

        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2752.415159526313!2d7.588576115595142!3d47.55959817918171!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4791b9a6f3e10ff7%3A0xdea0a2f76e49767f!2sBasel%2C%20Switzerland!5e0!3m2!1sde!2sch!4v1691010100000"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>

      <!-- Kontaktformular für Spenden-Fragen -->
      <section class="form-card" aria-label="Fragen zu Spenden">
        <h3>Fragen oder Angaben zu Ihrer Spende</h3>
        <p class="muted">
          Wenn Sie vom Job-Portal kommen, wird die Referenz automatisch übermittelt.
        </p>

        <form id="main-form" name="sophira-spende" method="POST" data-netlify="true" netlify-honeypot="bot-field" action="/danke.html">
          <input type="hidden" name="form-name" value="sophira-spende" />
          <p style="display:none"><label>Nicht ausfüllen: <input name="bot-field" /></label></p>

          <!-- Versteckte Felder aus der URL -->
          <input type="hidden" id="f-ref" name="ref" />
          <input type="hidden" id="f-type" name="type" />

          <label for="f-name">Name und Vorname</label>
          <input id="f-name" name="name" autocomplete="name" required />

          <label for="f-email">E-Mail</label>
          <input id="f-email" type="email" name="email" autocomplete="email" required />

          <label for="f-msg">Nachricht</label>
          <textarea id="f-msg" name="message" rows="5" placeholder="Geben Sie hier z.B. Betrag, Art oder Häufigkeit der Spende an."></textarea>

          <label>
            <input type="checkbox" name="consent" required />
            Ich bin einverstanden, dass meine Daten zur Kontaktaufnahme bezüglich meiner Spende verwendet werden.
          </label>

          <div class="actions">
            <button class="btn" type="submit">Senden</button>
            <a class="btn outline" href="jobs/index-de.html">Zum Job-Portal</a>
          </div>
        </form>
      </section>

      <!-- Kleine FAQ -->
      <section class="form-card" aria-label="Häufige Fragen zu Spenden">
        <h3>Häufige Fragen</h3>
        <p class="muted"><strong>Kann ich ohne PayPal-Konto spenden?</strong><br>
          Ja. Sie können direkt auf der PayPal-Oberfläche mit einer Kreditkarte spenden, ohne ein PayPal-Konto zu erstellen.
        </p>
        <p class="muted"><strong>Sind Spenden steuerlich abziehbar?</strong><br>
          Je nach Kanton und Art der Spende können Beiträge steuerlich abzugsfähig sein. Schreiben Sie uns gerne
          über das obige Formular, um mehr zu erfahren.
        </p>
        <p class="muted"><strong>Kann ich auch anders als mit Geld unterstützen?</strong><br>
          Ja. Sie können uns auch mit Mentoring, dem Teilen von Möglichkeiten oder Pro-bono-Fachkompetenz unterstützen.
          Kontaktieren Sie uns, wenn Sie dies in Betracht ziehen.
        </p>
      </section>

      <section class="social" aria-label="Soziale Netzwerke">
        <h3>Folgen Sie uns</h3>
        <p class="muted">Bleiben Sie über Aktionen, Events und neue Möglichkeiten informiert.</p>
        <a class="tiktok" href="https://www.tiktok.com/@sophira" target="_blank" rel="noopener">TikTok</a>
        <a class="linkedin" href="https://www.linkedin.com/company/sophira" target="_blank" rel="noopener">LinkedIn</a>
      </section>
    </main>

    <footer>
      <p>&copy; 2025 Sophira Verein | Basel, Schweiz</p>
    </footer>
  </div>

  <script>
    // Mobiles Menü
    (function(){
      const burger = document.getElementById('burger');
      const panel  = document.getElementById('menu-mobile');
      if(!burger || !panel) return;

      function toggleMenu(){
        const open = panel.classList.toggle('hidden') === false;
        burger.setAttribute('aria-expanded', String(open));
      }

      burger.addEventListener('click', toggleMenu);

      document.addEventListener('click', (e)=>{
        if(!panel.classList.contains('hidden') &&
           !panel.contains(e.target) &&
           !burger.contains(e.target)){
          toggleMenu();
        }
      });

      document.addEventListener('keydown', (e)=>{
        if(e.key === 'Escape' && !panel.classList.contains('hidden')){
          toggleMenu();
        }
      });
    })();

    // URL-Parameter (ref, type, from)
    (function(){
      const params = new URLSearchParams(window.location.search);
      const ref   = params.get('ref');
      const type  = params.get('type');
      const from  = params.get('from');

      if(ref){
        const fRef = document.getElementById('f-ref');
        if(fRef) fRef.value = ref;
      }
      if(type){
        const fType = document.getElementById('f-type');
        if(fType) fType.value = type;
      }

      const ctx = document.getElementById('ctx');
      if(!ctx) return;

      if(ref && type){
        ctx.classList.add('ok');
        const label = (type === 'offer')
          ? 'Stelle'
          : (type === 'candidate' ? 'Kandidat:innenprofil' : 'Referenz');
        ctx.innerHTML = `Übermittelte Referenz: <strong>${ref}</strong> (${label}). Wir verknüpfen Ihre Nachricht mit diesem Dossier.`;
        ctx.style.display = 'block';
      } else if (from === 'profil') {
        ctx.classList.add('warn');
        ctx.innerHTML = `Sie kontaktieren Sophira aus Ihrem Profilbereich. Bitte geben Sie den Zweck Ihrer Anfrage an.`;
        ctx.style.display = 'block';
      }
    })();

    // Geschütztes Telefon (Mini-Formular)
    (function(){
      const PHONE_NUMBER = '+41 79 123 45 67';
      const KEY  = 'sophira_phone_ok_until';
      const DAYS = 30;

      const mask     = document.getElementById('phone-mask');
      const btn      = document.getElementById('btn-reveal');
      const form     = document.getElementById('phone-request');
      const cancel   = document.getElementById('pr-cancel');
      const statusEl = document.getElementById('pr-status');

      function now(){ return new Date().getTime(); }
      function inDays(d){ return d*24*60*60*1000; }
      function markOk(){ localStorage.setItem(KEY, String(now()+inDays(DAYS))); }
      function hasOk(){
        const until = Number(localStorage.getItem(KEY) || 0);
        return until && now() < until;
      }
      function reveal(){
        if(mask) mask.textContent = PHONE_NUMBER;
        if(btn) btn.style.display = 'none';
        if(form) form.style.display = 'none';
      }

      if(hasOk()) reveal();

      if(btn){
        btn.addEventListener('click', ()=>{
          if(form) form.style.display = 'grid';
          btn.style.display = 'none';
          const n = document.getElementById('pr-name');
          if(n) n.focus();
        });
      }

      if(cancel){
        cancel.addEventListener('click', ()=>{
          if(form) form.style.display = 'none';
          if(btn) btn.style.display = 'inline-block';
          if(statusEl) statusEl.textContent = '';
        });
      }

      if(form){
        form.addEventListener('submit', async (e)=>{
          e.preventDefault();
          if(statusEl) statusEl.textContent = 'Senden…';

          const data = new FormData(form);
          const body = new URLSearchParams();
          for (const [k,v] of data.entries()){
            body.append(k, v);
          }

          try{
            const res = await fetch('/', {
              method:'POST',
              headers:{ 'Content-Type':'application/x-www-form-urlencoded' },
              body: body.toString()
            });
            if(res.ok){
              markOk();
              reveal();
              if(statusEl) statusEl.textContent = 'Danke, die Nummer ist sichtbar.';
            }else{
              if(statusEl) statusEl.textContent = 'Fehler beim Senden. Bitte erneut versuchen.';
              if(btn) btn.style.display = 'inline-block';
            }
          }catch(err){
            if(statusEl) statusEl.textContent = 'Keine Verbindung. Bitte später erneut versuchen.';
            if(btn) btn.style.display = 'inline-block';
          }
        });
      }
    })();
  </script>
</body>
</html>
