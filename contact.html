<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contact – Sophira</title>

  <!-- SEO -->
  <link rel="canonical" href="https://sophira.ch/contact.html" />
  <meta name="robots" content="index,follow" />
  <meta name="description" content="Contactez l'association Sophira : adresse, email, téléphone et plan d'accès à Bâle, Suisse. Formulaire de contact disponible." />

  <!-- Hreflang -->
  <link rel="alternate" hreflang="fr" href="https://sophira.ch/contact.html" />
  <link rel="alternate" hreflang="de" href="https://sophira.ch/contact-de.html" />
  <link rel="alternate" hreflang="x-default" href="https://sophira.ch/contact.html" />

  <!-- Open Graph -->
  <meta property="og:title" content="Contact – Sophira" />
  <meta property="og:description" content="Coordonnées et plan d'accès pour contacter Sophira, association pour la reconversion en Suisse." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://sophira.ch/contact.html" />
  <meta property="og:image" content="https://sophira.ch/Logo_sophira.png" />
  <meta property="og:site_name" content="Sophira" />
  <meta property="og:locale" content="fr_CH" />

  <!-- Social metas -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Contact – Sophira" />
  <meta name="twitter:description" content="Adresse, email et téléphone de Sophira, association pour la reconversion en Suisse." />
  <meta name="twitter:image" content="https://sophira.ch/Logo_sophira.png" />

  <!-- Police -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --text:#2c3e50; --muted:#4a5568; --brand:#1a73e8; --brand-hover:#155ab6;
      --bg-overlay:rgba(255,255,255,0.95); --whiteglass:#ffffffdd; --radius:12px;
      --shadow-sm:0 2px 8px rgba(0,0,0,0.05); --shadow-md:0 4px 12px rgba(0,0,0,0.08);
      --container:960px; --ok:#065f46; --warn:#92400e; --panel:#f8fafc;
      --border:#e5e7eb; --info:#0f172a;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0; font-family:'Inter',sans-serif;
      background:url('mathew-schwartz-91ryOVMlBJc-unsplash.jpg') no-repeat center/cover fixed;
      color:var(--text);
    }
    .overlay{
      background-color:var(--bg-overlay);
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }

    /* Skip link */
    .skip-link{
      position:absolute;
      left:1rem;
      top:.5rem;
      transform:translateY(-200%);
      background:#000;
      color:#fff;
      padding:.6rem .9rem;
      border-radius:8px;
      text-decoration:none;
      z-index:1000;
      box-shadow:var(--shadow-sm);
    }
    .skip-link:focus,
    .skip-link:focus-visible{
      transform:translateY(0);
      outline:2px solid #fff;
    }

    /* NAVBAR */
    header.navbar{
      position:sticky; top:0; z-index:20;
      display:flex; align-items:center; justify-content:space-between; gap:.75rem;
      padding:.8rem 1rem;
      background:var(--whiteglass);
      box-shadow:var(--shadow-sm);
      backdrop-filter:blur(6px);
    }
    .brand{
      display:flex; align-items:center; gap:.6rem;
      text-decoration:none;
    }
    .brand img{ height:55px; }
    .brand h1{
      margin:0; font-size:1.7rem; font-weight:600; color:#1a202c;
    }
    nav.primary{
      display:flex; gap:1.1rem;
    }
    nav.primary a{
      text-decoration:none; color:var(--text); font-weight:500;
    }
    nav.primary a:hover{
      color:#1e88e5;
    }
    .burger{
      display:none; background:none; border:none; padding:.4rem .6rem;
    }
    .burger svg{
      width:28px; height:28px;
    }
    .mobile-panel{
      display:none;
      position:fixed; inset:64px 0 0 0;
      background:#ffffffdd;
      backdrop-filter:blur(6px);
      padding:1rem;
    }
    .mobile-links{
      display:flex; flex-direction:column; gap:.8rem;
    }
    .mobile-links a{
      text-decoration:none; color:var(--text); font-weight:600;
      padding:.7rem 0;
      border-bottom:1px solid #ddd;
    }
    .mobile-links a:last-child{
      border-bottom:none;
    }
    .hidden{
      display:none !important;
    }
    @media(max-width:880px){
      nav.primary{ display:none; }
      .burger{ display:inline-flex; }
    }

    /* LAYOUT */
    .container{
      flex:1;
      max-width:var(--container);
      margin:2rem auto;
      padding:0 1rem;
    }
    .content{
      background:#ffffffdd;
      padding:2rem;
      border-radius:var(--radius);
      box-shadow:var(--shadow-sm);
    }
    .content h2{
      text-align:center;
      margin-top:0;
    }
    .intro{
      text-align:center;
      max-width:720px;
      margin:0 auto 1.2rem;
      color:var(--muted);
      font-size:1rem;
    }
    .contact-info{
      margin-top:1.5rem;
      font-size:1rem;
    }
    .muted{
      color:var(--muted);
    }

    /* Bandeau contexte */
    .context{
      margin:1rem 0 0;
      padding:.9rem 1rem;
      border-radius:10px;
      border:1px solid #cbd5e1;
      background:#f1f5f9;
      color:var(--info);
      display:none;
    }
    .context.ok{
      border-color:#a7f3d0;
      background:#ecfdf5;
      color:#064e3b;
    }
    .context.warn{
      border-color:#fed7aa;
      background:#fff7ed;
      color:#7c2d12;
    }

    /* Téléphone protégé */
    .phone-box{
      margin:1.4rem 0 0;
      padding:.8rem 1rem;
      border:1px dashed var(--border);
      border-radius:10px;
      background:#fff;
    }
    .phone-note{
      color:var(--muted);
      font-size:.95rem;
      margin:.5rem 0 0;
    }
    .small{
      font-size:.92rem;
      color:var(--muted);
    }

    iframe{
      width:100%;
      height:350px;
      border:none;
      border-radius:var(--radius);
      margin-top:2rem;
    }

    /* Formulaires */
    .form-card{
      margin-top:1.2rem;
      background:#fff;
      border:1px solid #e5e7eb;
      border-radius:12px;
      box-shadow:var(--shadow-sm);
      padding:1rem;
    }
    form label{
      display:block;
      margin:.6rem 0 .25rem;
      font-weight:600;
    }
    input, textarea{
      width:100%;
      padding:.6rem .7rem;
      border:1px solid #d1d5db;
      border-radius:8px;
    }
    .actions{
      display:flex;
      gap:.6rem;
      flex-wrap:wrap;
      margin-top:.8rem;
    }
    .btn{
      display:inline-block;
      background:var(--brand);
      color:#fff;
      text-decoration:none;
      padding:.6rem 1.1rem;
      border-radius:8px;
      font-weight:700;
      border:none;
      cursor:pointer;
    }
    .btn:hover{
      background:var(--brand-hover);
    }
    .btn.outline{
      background:transparent;
      color:var(--brand);
      border:2px solid var(--brand);
    }
    .btn.outline:hover{
      background:#e8f0fe;
    }

    /* Petit formulaire de demande de numéro */
    .phone-form{
      margin-top:.6rem;
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:.6rem;
      align-items:end;
    }
    .phone-form .wide{
      grid-column:span 2;
    }
    @media(max-width:640px){
      .phone-form{
        grid-template-columns:1fr;
      }
      .phone-form .wide{
        grid-column:auto;
      }
    }

    /* Bloc “Suivez-nous” */
    .social{
      margin-top:2rem;
      background:var(--panel);
      border:1px solid #e5e7eb;
      border-radius:12px;
      padding:1rem;
    }
    .social h3{
      margin:.2rem 0 .6rem;
    }
    .social a{
      display:inline-block;
      margin-right:.6rem;
      text-decoration:none;
      font-weight:700;
    }
    .tiktok{
      color:#000;
    }
    .linkedin{
      color:#0a66c2;
    }

    footer{
      text-align:center;
      padding:1rem;
      margin-top:3rem;
      font-size:.95rem;
      color:#4a4a4a;
      background:var(--whiteglass);
      border-top-left-radius:var(--radius);
      border-top-right-radius:var(--radius);
    }
  </style>
</head>
<body>
  <!-- Lien d’évitement -->
  <a class="skip-link" href="#main">Aller au contenu principal</a>

  <div class="overlay">
    <!-- NAVIGATION -->
    <header class="navbar">
      <a class="brand" href="index.html">
        <img src="Logo_sophira.png" alt="Logo Sophira" />
        <h1>Sophira</h1>
      </a>
      <nav class="primary" aria-label="Liens principaux">
        <a href="index.html">Accueil</a>
        <a href="team.html">Équipe</a>
        <a href="project.html">Projet social</a>
        <a href="dashboard.html">Tableau de bord</a>
        <a href="blog.html">Blog</a>
        <a href="jobs/index.html">Portail Emplois</a>
        <a href="contact.html" aria-current="page">Contact</a>
      </nav>
      <button class="burger" id="burger" aria-label="Ouvrir le menu" aria-controls="menu-mobile" aria-expanded="false">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M3 6h18M3 12h18M3 18h18" stroke-width="2" stroke-linecap="round"/></svg>
      </button>
    </header>

    <!-- MENU MOBILE -->
    <div id="menu-mobile" class="mobile-panel hidden">
      <div class="mobile-links">
        <a href="index.html">Accueil</a>
        <a href="team.html">Équipe</a>
        <a href="project.html">Projet social</a>
        <a href="dashboard.html">Tableau de bord</a>
        <a href="blog.html">Blog</a>
        <a href="jobs/index.html">Portail Emplois</a>
        <a href="contact.html" aria-current="page">Contact</a>
      </div>
    </div>

    <!-- CONTENU -->
    <main id="main" class="container">
      <div class="content">
        <h2>Contactez-nous</h2>
        <p class="intro">
          Contactez-nous pour toute question, pour en savoir plus sur nos programmes
          ou pour échanger sur une collaboration possible.
        </p>

        <!-- Bandeau contexte (si URL param) -->
        <div id="ctx" class="context" role="status" aria-live="polite"></div>

        <div class="contact-info">
          <p><strong>Adresse :</strong> Sandgrubenstrasse, 4058 Bâle, Suisse</p>
          <p><strong>Email :</strong> association_sophira@protonmail.com</p>

          <!-- Téléphone protégé -->
          <div class="phone-box" aria-live="polite">
            <p style="margin:0;"><strong>Téléphone :</strong>
              <span id="phone-mask">+41 ••• ••• •• ••</span>
              <button id="btn-reveal" class="btn outline" type="button" aria-controls="phone-request">Afficher le numéro</button>
            </p>
            <p class="phone-note">
              Pour des raisons anti-spam, le numéro s'affiche <strong>après l'envoi</strong> de votre nom et de votre e-mail
              via le petit formulaire ci-dessous. L'affichage reste actif 30 jours sur cet appareil.
            </p>

            <!-- Mini-formulaire Netlify (AJAX) -->
            <form id="phone-request" name="sophira-phone-request" class="phone-form" method="POST" data-netlify="true" netlify-honeypot="bot-field">
              <input type="hidden" name="form-name" value="sophira-phone-request" />
              <p style="display:none"><label>Ne pas remplir : <input name="bot-field" /></label></p>

              <div>
                <label for="pr-name">Nom et prénom</label>
                <input id="pr-name" name="name" autocomplete="name" required />
              </div>
              <div>
                <label for="pr-email">E-mail</label>
                <input id="pr-email" type="email" name="email" autocomplete="email" required />
              </div>
              <div class="wide">
                <label>
                  <input type="checkbox" id="pr-consent" name="consent" required />
                  J’accepte que Sophira me contacte au sujet de ma demande.
                </label>
              </div>
              <div class="wide actions">
                <button class="btn" type="submit">Envoyer & afficher le numéro</button>
                <button class="btn outline" type="button" id="pr-cancel">Annuler</button>
                <span id="pr-status" class="small" role="status" aria-live="polite"></span>
              </div>
            </form>
          </div>
        </div>

        <!-- Google Maps -->
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2752.415159526313!2d7.588576115595142!3d47.55959817918171!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4791b9a6f3e10ff7%3A0xdea0a2f76e49767f!2sBasel%2C%20Switzerland!5e0!3m2!1sfr!2sch!4v1691010100000"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"></iframe>

        <!-- Formulaire de contact -->
        <section class="form-card" aria-label="Formulaire de contact">
          <h3>Envoyer un message</h3>
          <p class="muted">Si vous venez du Portail Emplois, la référence est transmise automatiquement.</p>

          <form name="sophira-contact" method="POST" data-netlify="true" netlify-honeypot="bot-field" action="/merci.html">
            <input type="hidden" name="form-name" value="sophira-contact" />
            <p style="display:none"><label>Ne pas remplir: <input name="bot-field" /></label></p>

            <!-- Champs cachés alimentés par l'URL -->
            <input type="hidden" id="f-ref" name="ref" />
            <input type="hidden" id="f-type" name="type" />

            <label for="f-nom">Nom et prénom</label>
            <input id="f-nom" name="nom" autocomplete="name" required />

            <label for="f-email">E-mail</label>
            <input id="f-email" type="email" name="email" autocomplete="email" required />

            <label for="f-msg">Message</label>
            <textarea id="f-msg" name="message" rows="5" placeholder="Votre demande..."></textarea>

            <label>
              <input type="checkbox" name="consent" required />
              J’accepte que mes données soient utilisées pour me recontacter.
            </label>

            <div class="actions">
              <button class="btn" type="submit">Envoyer</button>
              <a class="btn outline" href="jobs/index.html">Aller au Portail Emplois</a>
            </div>
          </form>
        </section>

        <!-- Bloc “Suivez-nous” -->
        <section class="social" aria-label="Réseaux sociaux">
          <h3>Suivez-nous</h3>
          <p class="muted">Restez informé·e des actions, événements et nouvelles opportunités.</p>
          <a class="tiktok" href="https://www.tiktok.com/@sophira" target="_blank" rel="noopener">TikTok</a>
          <a class="linkedin" href="https://www.linkedin.com/company/sophira" target="_blank" rel="noopener">LinkedIn</a>
        </section>
      </div>
    </main>

    <footer>
      <p>&copy; 2025 Sophira Association | Basel, Suisse</p>
    </footer>
  </div>

  <!-- JS : menu mobile + bandeau contexte + préremplissage + téléphone protégé -->
  <script>
    // Menu mobile
    (function(){
      const burger = document.getElementById('burger');
      const panel = document.getElementById('menu-mobile');
      if(!burger || !panel) return;

      function toggleMenu(){
        const open = panel.classList.toggle('hidden') === false;
        burger.setAttribute('aria-expanded', String(open));
      }

      burger.addEventListener('click', toggleMenu);
      document.addEventListener('click', (e) => {
        if(!panel.classList.contains('hidden') &&
           !panel.contains(e.target) &&
           !burger.contains(e.target)){
          toggleMenu();
        }
      });
      document.addEventListener('keydown', (e) => {
        if(e.key === 'Escape' && !panel.classList.contains('hidden')) toggleMenu();
      });
    })();

    // Lecture des paramètres d’URL (ref, type, from)
    (function(){
      const params = new URLSearchParams(window.location.search);
      const ref = params.get('ref');
      const type = params.get('type');
      const from = params.get('from');

      if(ref) document.getElementById('f-ref').value = ref;
      if(type) document.getElementById('f-type').value = type;

      const ctx = document.getElementById('ctx');
      if(!ctx) return;

      if(ref && type){
        ctx.classList.add('ok');
        const label = (type === 'offer') ? "offre"
                     : (type === 'candidate' ? "profil candidat" : "référence");
        ctx.innerHTML = `Référence transmise : <strong>${ref}</strong> (${label}). Nous relierons votre message à ce dossier.`;
        ctx.style.display = 'block';
      } else if (from === 'profil') {
        ctx.classList.add('warn');
        ctx.innerHTML = `Vous contactez Sophira depuis votre espace profil. N’oubliez pas d’indiquer l’objet de votre demande.`;
        ctx.style.display = 'block';
      }
    })();

    // Téléphone protégé (mini-formulaire)
    (function(){
      const PHONE_NUMBER = '+41 78 624 89 79';
      const KEY = 'sophira_phone_ok_until';
      const DAYS = 30;

      const mask = document.getElementById('phone-mask');
      const btn = document.getElementById('btn-reveal');
      const form = document.getElementById('phone-request');
      const cancel = document.getElementById('pr-cancel');
      const statusEl = document.getElementById('pr-status');

      function now(){ return new Date().getTime(); }
      function inDays(d){ return d*24*60*60*1000; }
      function markOk(){ localStorage.setItem(KEY, String(now()+inDays(DAYS))); }
      function hasOk(){
        const until = Number(localStorage.getItem(KEY) || 0);
        return until && now() < until;
      }
      function reveal(){
        if(mask) mask.textContent = PHONE_NUMBER;
        if(btn) btn.style.display = 'none';
        if(form) form.style.display = 'none';
      }

      if(hasOk()) reveal();

      if(btn){
        btn.addEventListener('click', ()=>{
          form.style.display = 'grid';
          btn.style.display = 'none';
          const n = document.getElementById('pr-name');
          if(n) n.focus();
        });
      }

      if(cancel){
        cancel.addEventListener('click', ()=>{
          form.style.display = 'none';
          btn.style.display = 'inline-block';
          statusEl.textContent = '';
        });
      }

      if(form){
        form.addEventListener('submit', async (e)=>{
          e.preventDefault();
          statusEl.textContent = 'Envoi…';

          const data = new FormData(form);
          const body = new URLSearchParams();
          for (const [k,v] of data.entries()){
            body.append(k, v);
          }

          try{
            const res = await fetch('/', {
              method:'POST',
              headers:{ 'Content-Type':'application/x-www-form-urlencoded' },
              body: body.toString()
            });
            if(res.ok){
              markOk();
              reveal();
              statusEl.textContent = 'Merci, le numéro est maintenant visible.';
            }else{
              statusEl.textContent = 'Erreur lors de l’envoi. Merci de réessayer.';
              btn.style.display='inline-block';
            }
          }catch(err){
            statusEl.textContent = 'Pas de connexion. Merci de réessayer plus tard.';
            btn.style.display='inline-block';
          }
        });
      }
    })();
  </script>
</body>
</html>
