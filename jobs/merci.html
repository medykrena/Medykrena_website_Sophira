<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Confirmation – Portail Emploi Sophira</title>
  <link rel="canonical" href="https://sophira.ch/jobs/merci.html" />
  <meta name="robots" content="noindex,follow" />
  <meta name="description" content="Confirmation d'envoi pour le Portail Emploi Sophira." />

  <link rel="icon" href="/favicon.ico" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --text:#2c3e50; --muted:#4a5568; --brand:#1a73e8; --brand-hover:#155ab6;
      --whiteglass:#ffffffdd; --panel:#edf2f7cc; --radius:12px;
      --shadow-sm:0 2px 8px rgba(0,0,0,.05); --shadow-md:0 4px 12px rgba(0,0,0,.08);
      --container:780px;
      --ok:#0f9d58; --warn:#f2994a; --err:#d93025;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:'Inter',sans-serif; color:var(--text);
      background:url('../mathew-schwartz-91ryOVMlBJc-unsplash.jpg') no-repeat center/cover fixed;
    }
    .overlay{min-height:100vh; background:rgba(255,255,255,.9); display:flex; flex-direction:column;}
    header.navbar{
      position:sticky; top:0; z-index:10; background:var(--whiteglass);
      display:flex; align-items:center; justify-content:space-between; gap:.75rem;
      padding:.8rem 1rem; box-shadow:var(--shadow-sm); backdrop-filter:blur(6px);
    }
    .brand{display:flex; align-items:center; gap:.6rem; text-decoration:none;}
    .brand img{height:48px}
    .brand strong{font-size:1.2rem; color:#1a202c}
    nav a{ text-decoration:none; font-weight:700; color:var(--brand); }
    nav a:hover{ color:var(--brand-hover); }

    .container{flex:1; max-width:var(--container); margin:2rem auto; padding:0 1rem;}
    .card{
      background:#fff; border:1px solid #e5e7eb; border-radius:12px;
      padding:1.2rem; box-shadow:var(--shadow-sm);
    }
    .status{ display:flex; align-items:flex-start; gap:.8rem; }
    .status h1{ margin:.2rem 0 .4rem; font-size:1.6rem; }
    .muted{ color:var(--muted); }
    .ok{ border-left:6px solid var(--ok); padding-left:1rem; }
    .warn{ border-left:6px solid var(--warn); padding-left:1rem; }
    .err{ border-left:6px solid var(--err); padding-left:1rem; }
    .actions{ margin-top:1rem; display:flex; gap:.6rem; flex-wrap:wrap; }
    .btn{ display:inline-block; text-decoration:none; font-weight:700; border-radius:10px; padding:.6rem 1rem; background:var(--brand); color:#fff; }
    .btn:hover{ background:var(--brand-hover); }
    .btn.outline{ background:transparent; color:var(--brand); border:2px solid var(--brand); }
    .btn.outline:hover{ background:#e8f0fe; }

    footer{ text-align:center; padding:1rem; margin-top:3rem; font-size:.95rem; color:#4a4a4a; background:var(--whiteglass); border-top-left-radius:12px; border-top-right-radius:12px; }
  </style>
</head>
<body>
  <div class="overlay">
    <header class="navbar" role="navigation" aria-label="Navigation principale">
      <a class="brand" href="../index.html">
        <img src="../Logo_sophira.png" alt="Logo Sophira" />
        <strong>Sophira</strong>
      </a>
      <nav>
        <a href="index.html">Portail Emplois</a>
      </nav>
    </header>

    <main class="container" id="main">
      <section class="card" id="panel">
        <!-- Filled by JS -->
      </section>
    </main>

    <footer>
      <p>&copy; 2025 Sophira Association | Basel, Suisse</p>
    </footer>
  </div>

  <script>
    const params = new URLSearchParams(location.search);
    const ok = params.get('ok');
    const error = params.get('error');
    const type = params.get('type'); // candidat | employeur | unknown

    const panel = document.getElementById('panel');

    function el(html){ const d=document.createElement('div'); d.innerHTML=html.trim(); return d.firstElementChild; }

    if (error === 'duplicate') {
      const who = type === 'employeur' ? "employeur" : "candidat";
      panel.classList.add('warn');
      panel.innerHTML = `
        <div class="status">
          <div>
            <h1>Adresse e-mail déjà utilisée récemment</h1>
            <p class="muted">
              Votre e-mail pour le formulaire <strong>${who}</strong> a déjà été utilisé il y a peu de temps.
              Pour éviter les doublons, merci de réessayer plus tard (environ 10 minutes).
            </p>
            <div class="actions">
              <a class="btn" href="inscription.html">Retour à l’inscription</a>
              <a class="btn outline" href="../contact.html">Nous contacter</a>
            </div>
          </div>
        </div>
      `;
    } else if (error === 'server') {
      panel.classList.add('err');
      panel.innerHTML = `
        <div class="status">
          <div>
            <h1>Un problème est survenu</h1>
            <p class="muted">
              Le serveur a rencontré une erreur. Merci de réessayer plus tard.
            </p>
            <div class="actions">
              <a class="btn" href="inscription.html">Retour à l’inscription</a>
              <a class="btn outline" href="../contact.html">Nous contacter</a>
            </div>
          </div>
        </div>
      `;
    } else if (error === 'unauthorized' || error === 'badjson') {
      panel.classList.add('err');
      panel.innerHTML = `
        <div class="status">
          <div>
            <h1>Envoi invalide</h1>
            <p class="muted">
              La requête n’a pas pu être traitée. Merci de réessayer.
            </p>
            <div class="actions">
              <a class="btn" href="inscription.html">Retour à l’inscription</a>
            </div>
          </div>
        </div>
      `;
    } else if (ok === '1') {
      const who = type === 'employeur' ? "Employeur" : (type === 'candidat' ? "Candidat" : "Envoi");
      panel.classList.add('ok');
      panel.innerHTML = `
        <div class="status">
          <div>
            <h1>${who} – merci pour votre envoi !</h1>
            <p class="muted">
              Nous avons bien reçu vos informations. Nous vous recontacterons si nécessaire.
            </p>
            <div class="actions">
              <a class="btn" href="index.html">Aller au Portail Emplois</a>
              <a class="btn outline" href="../index.html">Retour à l’accueil</a>
            </div>
          </div>
        </div>
      `;
    } else {
      // Fallback
      panel.classList.add('ok');
      panel.innerHTML = `
        <div class="status">
          <div>
            <h1>Merci !</h1>
            <p class="muted">Votre envoi a été pris en compte.</p>
            <div class="actions">
              <a class="btn" href="index.html">Portail Emplois</a>
            </div>
          </div>
        </div>
      `;
    }
  </script>
</body>
</html>
