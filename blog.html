<!DOCTYPE html>
<html lang="fr" itemscope itemtype="https://schema.org/Blog">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Blog – Sophira</title>

  <!-- SEO -->
  <link rel="canonical" href="https://sophira.ch/blog.html" />
  <meta name="robots" content="index,follow" />
  <meta name="description" content="Le blog de Sophira : actualités, analyses et coulisses de notre initiative de reconversion professionnelle en Suisse." />

  <!-- Open Graph -->
  <meta property="og:title" content="Blog – Sophira" />
  <meta property="og:description" content="Découvrez les actualités, analyses et coulisses de Sophira, association pour la reconversion en Suisse." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://sophira.ch/blog.html" />
  <meta property="og:image" content="https://sophira.ch/Logo_sophira.png" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Blog – Sophira" />
  <meta name="twitter:description" content="Suivez les articles et histoires de Sophira autour de la reconversion en Suisse." />
  <meta name="twitter:image" content="https://sophira.ch/Logo_sophira.png" />

  <!-- Police -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg-overlay: rgba(255,255,255,0.92);
      --card-bg: rgba(255,255,255,0.88);
      --text: #2c3e50;
      --muted: #4a5568;
      --brand: #1a73e8;
      --brand-hover: #155ab6;
      --chip: #eef2ff;
      --shadow-sm: 0 2px 8px rgba(0,0,0,0.05);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
      --radius: 12px;
      --radius-sm: 8px;
      --container: 1100px;
    }
    body{
      margin:0;
      font-family:'Inter',sans-serif;
      background:url('mathew-schwartz-91ryOVMlBJc-unsplash.jpg') no-repeat center center fixed;
      background-size:cover; color:var(--text);
    }
    .overlay{ background-color:var(--bg-overlay); min-height:100vh; display:flex; flex-direction:column; }

    /* NAVBAR */
    header.navbar{
      position:sticky; top:0; z-index:20;
      display:flex; align-items:center; justify-content:space-between; gap:.75rem;
      padding:.8rem 1rem;
      background:#ffffffdd; box-shadow:var(--shadow-sm); backdrop-filter:blur(6px);
    }
    .brand{ display:flex; align-items:center; gap:.6rem; text-decoration:none; }
    .brand img{ height:55px; }
    .brand h1{ margin:0; font-size:1.7rem; font-weight:600; color:#1a202c; }

    nav.primary{ display:flex; gap:1.1rem; }
    nav.primary a{ text-decoration:none; color:var(--text); font-weight:500; }
    nav.primary a:hover{ color:#1e88e5; }

    .burger{ display:none; background:none; border:none; padding:.4rem .6rem; }
    .burger svg{ width:28px; height:28px; }

    .mobile-panel{ display:none; position:fixed; inset:64px 0 0 0; background:#ffffffdd; backdrop-filter:blur(6px); padding:1rem; }
    .mobile-links{ display:flex; flex-direction:column; gap:.8rem; }
    .mobile-links a{ text-decoration:none; color:var(--text); font-weight:600; padding:.7rem 0; border-bottom:1px solid #ddd; }
    .mobile-links a:last-child{ border-bottom:none; }
    .hidden{ display:none !important; }

    .container{ flex:1; max-width:var(--container); margin:2rem auto; padding:0 1rem; }

    /* Fil d’Ariane */
    nav.breadcrumbs{ font-size:.9rem; margin:1rem 0; }
    nav.breadcrumbs ol{ list-style:none; display:flex; gap:.5rem; padding:0; margin:0; }
    nav.breadcrumbs li{ color:var(--muted); }
    nav.breadcrumbs a{ text-decoration:none; color:var(--brand); }

    /* HERO */
    .hero{ background:#edf2f7cc; padding:2.4rem 1.4rem; border-radius:var(--radius); text-align:center; box-shadow:var(--shadow-md); }
    .hero h2{ font-size:2.1rem; margin:.2rem 0 .6rem; }
    .subtitle{ font-size:1.08rem; color:var(--muted); margin:0 auto; max-width:800px; }

    /* POSTS */
    .posts{ margin-top:2rem; display:grid; grid-template-columns:repeat(12,1fr); gap:1.2rem; }
    .post{ grid-column:span 12; background:var(--card-bg); border-radius:var(--radius); box-shadow:var(--shadow-sm); padding:1.2rem; }
    .post h3{ margin:.1rem 0 .35rem; font-size:1.25rem; }
    .meta{ font-size:.92rem; color:var(--muted); margin-bottom:.6rem; }
    .excerpt{ color:#374151; line-height:1.55; margin:.4rem 0 .8rem; }
    .readmore{ display:inline-block; font-weight:600; text-decoration:none; color:#fff; background:var(--brand); padding:.5rem .9rem; border-radius:var(--radius-sm); }
    .readmore:hover{ background:var(--brand-hover); }

    /* AUTO-NEWS */
    .news-block{ margin-top:2rem; background:#fff; border:1px solid #e5e7eb; border-radius:var(--radius); box-shadow:var(--shadow-sm); }
    .news-header{ display:flex; align-items:center; justify-content:space-between; gap:1rem; padding:1rem 1.2rem; border-bottom:1px solid #e5e7eb; }
    .news-header h3{ margin:0; font-size:1.25rem; }
    .tabs{ display:flex; gap:.5rem; flex-wrap:wrap; }
    .tab-btn{ background:#fff; border:1px solid #d1d5db; border-radius:999px; padding:.4rem .8rem; font-weight:700; cursor:pointer; }
    .tab-btn[aria-selected="true"]{ background:var(--brand); color:#fff; border-color:var(--brand); }

    .news-body{ padding:1rem 1.2rem; }
    .news-grid{ display:grid; grid-template-columns:repeat(12,1fr); gap:1rem; }
    .news-card{ grid-column:span 12; background:#ffffff; border:1px solid #e5e7eb; border-radius:10px; padding:1rem; }
    .news-card h4{ margin:.1rem 0 .35rem; font-size:1.05rem; }
    .news-meta{ font-size:.9rem; color:#64748b; margin-bottom:.45rem; }
    .chips{ display:flex; flex-wrap:wrap; gap:.3rem; margin-top:.35rem; }
    .chip{ background:var(--chip); border:1px solid #c7d2fe; padding:.2rem .45rem; border-radius:999px; font-size:.8rem; }
    .extlink{ display:inline-block; margin-top:.5rem; text-decoration:none; font-weight:600; color:#fff; background:var(--brand); padding:.4rem .75rem; border-radius:8px; }
    .extlink:hover{ background:var(--brand-hover); }

    .news-empty, .news-error, .news-loading{
      margin:1rem 0; padding:1rem; border-radius:10px;
    }
    .news-empty{ border:1px dashed #cbd5e1; background:#f8fafc; color:#475569; }
    .news-error{ border:1px solid #f5c2c2; background:#fff0f0; color:#9b1c1c; }
    .news-loading{ border:1px solid #e5e7eb; background:#fff; color:#374151; }

    footer.site{ text-align:center; padding:1rem; margin-top:3rem; font-size:.95rem; color:#4a4a4a; background:#ffffffdd; border-top-left-radius:var(--radius); border-top-right-radius:var(--radius); }

    @media (min-width:680px){ .post{ grid-column:span 6; } .news-card{ grid-column:span 6; } }
    @media (min-width:1000px){ .post{ grid-column:span 4; } .news-card{ grid-column:span 4; } }
    @media (max-width:880px){ nav.primary{ display:none; } .burger{ display:inline-flex; } }
  </style>
</head>
<body>
  <div class="overlay">
    <!-- NAVIGATION -->
    <header class="navbar" role="navigation" aria-label="Navigation principale">
      <a class="brand" href="index.html">
        <img src="Logo_sophira.png" alt="Logo Sophira" />
        <h1>Sophira</h1>
      </a>
      <nav class="primary" aria-label="Liens principaux">
        <a href="index.html">Accueil</a>
        <a href="team.html">Équipe</a>
        <a href="project.html">Projet social</a>
        <a href="dashboard.html">Tableau de bord</a>
        <a href="jobs/index.html">Portail Emplois</a>
        <a href="blog.html" aria-current="page">Blog</a>
        <a href="contact.html">Contact</a>
      </nav>
      <button class="burger" id="burger" aria-label="Ouvrir le menu" aria-controls="menu-mobile" aria-expanded="false">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M3 6h18M3 12h18M3 18h18" stroke-width="2" stroke-linecap="round"/></svg>
      </button>
    </header>

    <!-- MENU MOBILE -->
    <div id="menu-mobile" class="mobile-panel hidden" role="dialog" aria-modal="true" aria-label="Menu mobile">
      <div class="mobile-links">
        <a href="index.html">Accueil</a>
        <a href="team.html">Équipe</a>
        <a href="project.html">Projet social</a>
        <a href="dashboard.html">Tableau de bord</a>
        <a href="blog.html" aria-current="page">Blog</a>
        <a href="contact.html">Contact</a>
      </div>
    </div>

    <!-- FIL D’ARIANE -->
    <nav class="breadcrumbs container" aria-label="Fil d’Ariane">
      <ol>
        <li><a href="index.html">Accueil</a></li>
        <li>›</li>
        <li>Blog</li>
      </ol>
    </nav>

    <!-- CONTENU -->
    <main class="container">
      <section class="hero">
        <h2>Le blog Sophira</h2>
        <p class="subtitle">Actualités, analyses et coulisses de notre mission : créer des ponts vers les métiers d’avenir.</p>
      </section>

      <!-- Articles internes -->
      <section class="posts" aria-label="Articles du blog">
        <article class="post" itemscope itemtype="https://schema.org/BlogPosting">
          <h3 itemprop="headline">Lancement de l’initiative Sophira</h3>
          <p class="meta">Publié le <time datetime="2025-08-02" itemprop="datePublished">2 août 2025</time></p>
          <p class="excerpt" itemprop="description">Sophira voit le jour pour accompagner les adultes dans leur reconversion professionnelle, en réponse aux pénuries de talents en Suisse et aux transitions numérique et écologique.</p>
          <a class="readmore" href="article6.html" itemprop="url">Lire la suite</a>
        </article>

        <article class="post" itemscope itemtype="https://schema.org/BlogPosting">
          <h3 itemprop="headline">Pourquoi les métiers de la data pour des adultes en transition professionnelle&nbsp;?</h3>
          <p class="meta">Publié le <time datetime="2025-07-25" itemprop="datePublished">25 juillet 2025</time></p>
          <p class="excerpt" itemprop="description">Les compétences en data science sont très demandées dans la santé, la finance et les énergies renouvelables. Elles ouvrent aux adultes en reconversion des emplois attractifs et facilitent leur adaptation au monde numérique.</p>
          <a class="readmore" href="article7.html" itemprop="url">Lire la suite</a>
        </article>

        <article class="post" itemscope itemtype="https://schema.org/BlogPosting">
          <h3 itemprop="headline">Pourquoi la reconversion professionnelle est essentielle en Suisse</h3>
          <p class="meta">Publié le <time datetime="2025-08-30" itemprop="datePublished">30 août 2025</time></p>
          <p class="excerpt" itemprop="description">La reconversion professionnelle est devenue incontournable en Suisse : elle s’inscrit dans des carrières non linéaires et requiert un accompagnement durable…</p>
          <a class="readmore" href="article1.html" itemprop="url">Lire la suite</a>
        </article>

        <article class="post" itemscope itemtype="https://schema.org/BlogPosting">
          <h3 itemprop="headline">Secteurs porteurs et métiers d’avenir en Suisse en 2025</h3>
          <p class="meta">Publié le <time datetime="2025-08-30" itemprop="datePublished">30 août 2025</time></p>
          <p class="excerpt" itemprop="description">Le marché du travail suisse connaît une pénurie de talents dans la santé, l’IT et l’énergie ; découvrez les opportunités et salaires de ces métiers d’avenir…</p>
          <a class="readmore" href="article2.html" itemprop="url">Lire la suite</a>
        </article>

        <article class="post" itemscope itemtype="https://schema.org/BlogPosting">
          <h3 itemprop="headline">Formations et programmes pour se reconvertir dans l’IT et l’innovation</h3>
          <p class="meta">Publié le <time datetime="2025-08-30" itemprop="datePublished">30 août 2025</time></p>
          <p class="excerpt" itemprop="description">Devenez Assistant·e ICT, Digital Collaboration Specialist ou spécialiste en cybersécurité grâce à des programmes accessibles aux adultes en reconversion…</p>
          <a class="readmore" href="article3.html" itemprop="url">Lire la suite</a>
        </article>
      </section>

      <!-- ACTUALITÉS AUTOMATIQUES -->
      <section class="news-block" aria-labelledby="news-title">
        <div class="news-header">
          <h3 id="news-title">Actualités sélectionnées (FR/DE)</h3>
          <div class="tabs" role="tablist" aria-label="Langue des actualités">
            <button class="tab-btn" id="tab-fr" role="tab" aria-controls="panel-fr" aria-selected="true">FR</button>
            <button class="tab-btn" id="tab-de" role="tab" aria-controls="panel-de" aria-selected="false">DE</button>
          </div>
        </div>

        <div class="news-body">
          <!-- FR panel -->
          <div id="panel-fr" role="tabpanel" aria-labelledby="tab-fr">
            <div id="news-loading-fr" class="news-loading" role="status" aria-live="polite">Chargement des actualités…</div>
            <div id="news-error-fr" class="news-error" role="alert" hidden>Impossible de charger les actualités pour le moment.</div>
            <div id="news-empty-fr" class="news-empty" hidden>Aucune actualité récente ne correspond à nos critères.</div>
            <div id="news-grid-fr" class="news-grid" aria-live="polite"></div>
          </div>

          <!-- DE panel -->
          <div id="panel-de" role="tabpanel" aria-labelledby="tab-de" hidden>
            <div id="news-loading-de" class="news-loading" role="status" aria-live="polite">Lade Nachrichten…</div>
            <div id="news-error-de" class="news-error" role="alert" hidden>Nachrichten konnten nicht geladen werden.</div>
            <div id="news-empty-de" class="news-empty" hidden>Keine passenden aktuellen Meldungen.</div>
            <div id="news-grid-de" class="news-grid" aria-live="polite"></div>
          </div>
        </div>
      </section>
    </main>

    <footer class="site">
      <p>&copy; 2025 Sophira Association | Basel, Suisse · <a href="/jobs/privacy-data-processing.html">Confidentialité</a> · <a href="/jobs/privacy-data-processing-de.html">Datenschutz</a></p>
    </footer>
  </div>

  <!-- JSON-LD (Blog) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Blog",
    "name": "Sophira - Blog",
    "url": "https://sophira.ch/blog.html",
    "publisher": {"@type":"Organization","name":"Sophira","logo":{"@type":"ImageObject","url":"https://sophira.ch/Logo_sophira.png"}}
  }
  </script>

  <!-- JS menu mobile + Auto-news loader -->
  <script>
    // ===== Mobile menu
    (function(){
      const burger = document.getElementById('burger');
      const panel  = document.getElementById('menu-mobile');
      if(!burger || !panel) return;
      function toggleMenu(){
        const open = panel.classList.toggle('hidden') === false;
        burger.setAttribute('aria-expanded', String(open));
      }
      burger.addEventListener('click', toggleMenu);
      document.addEventListener('click', (e)=>{ if(!panel.classList.contains('hidden') && !panel.contains(e.target) && !burger.contains(e.target)){ toggleMenu(); }});
      document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && !panel.classList.contains('hidden')) toggleMenu(); });
    })();

    // ===== Tabs for news
    (function(){
      const tabFR = document.getElementById('tab-fr');
      const tabDE = document.getElementById('tab-de');
      const panFR = document.getElementById('panel-fr');
      const panDE = document.getElementById('panel-de');
      function select(which){
        const fr = which === 'fr';
        tabFR.setAttribute('aria-selected', fr ? 'true' : 'false');
        tabDE.setAttribute('aria-selected', fr ? 'false' : 'true');
        panFR.hidden = !fr; panDE.hidden = fr;
      }
      tabFR.addEventListener('click', ()=>select('fr'));
      tabDE.addEventListener('click', ()=>select('de'));
    })();

    // ===== Auto-news loader
    (function(){
      // You can serve your feed at either endpoint; code tries both.
      const ENDPOINTS = [
        '/.netlify/functions/news',       // Netlify Function (recommended)
        '/jobs/news-feed.json'            // Static fallback if you prebuild JSON
      ];

      const CACHE_KEY = 'sophira_news_cache_v1';
      const CACHE_TTL_MS = 60 * 60 * 1000; // 1 hour

      const el = {
        fr: {
          grid: document.getElementById('news-grid-fr'),
          load: document.getElementById('news-loading-fr'),
          err:  document.getElementById('news-error-fr'),
          empty:document.getElementById('news-empty-fr')
        },
        de: {
          grid: document.getElementById('news-grid-de'),
          load: document.getElementById('news-loading-de'),
          err:  document.getElementById('news-error-de'),
          empty:document.getElementById('news-empty-de')
        }
      };

      function readCache(){
        try{
          const raw = localStorage.getItem(CACHE_KEY);
          if(!raw) return null;
          const obj = JSON.parse(raw);
          if(Date.now() - (obj.ts || 0) > CACHE_TTL_MS) return null;
          return obj.data;
        } catch { return null; }
      }
      function writeCache(data){
        try{
          localStorage.setItem(CACHE_KEY, JSON.stringify({ ts: Date.now(), data }));
        } catch {}
      }

      function normalizeItem(it){
        // Expected fields from function: title, url, published_at, source, lang, matched_keywords, excerpt
        return {
          title: it.title || 'Sans titre',
          url: it.url || '#',
          published_at: it.published_at || '',
          source: it.source || '',
          lang: (it.lang || '').toLowerCase(),
          matched: Array.isArray(it.matched_keywords) ? it.matched_keywords : [],
          excerpt: it.excerpt || ''
        };
      }

      function render(list, lang){
        const ref = el[lang];
        ref.grid.innerHTML = '';
        ref.load.hidden = true;
        ref.err.hidden = true;

        const items = list.filter(x => (x.lang||'').toLowerCase() === lang);
        if(!items.length){
          ref.empty.hidden = false;
          return;
        }
        ref.empty.hidden = true;

        items.forEach(x => {
          const card = document.createElement('article');
          card.className = 'news-card';
          const dateTxt = x.published_at ? new Date(x.published_at).toLocaleDateString(lang === 'fr' ? 'fr-CH':'de-CH', { year:'numeric', month:'short', day:'numeric' }) : '';
          const chips = (x.matched||[]).map(k => `<span class="chip">${k}</span>`).join('');

          card.innerHTML = `
            <h4>${x.title}</h4>
            <div class="news-meta">${x.source ? x.source+' · ' : ''}${dateTxt}</div>
            <p class="excerpt">${x.excerpt || ''}</p>
            <div class="chips" aria-label="Mots-clés">${chips}</div>
            <a class="extlink" href="${x.url}" target="_blank" rel="noopener noreferrer">Lire l’article</a>
          `;
          ref.grid.appendChild(card);
        });
      }

      async function fetchFirstWorking(){
        for(const url of ENDPOINTS){
          try{
            const res = await fetch(url, { headers: { 'Accept': 'application/json' } });
            if(res.ok){
              const data = await res.json();
              return Array.isArray(data) ? data.map(normalizeItem) : [];
            }
          } catch(e){ /* try next */ }
        }
        throw new Error('No endpoint responded');
      }

      async function init(){
        // show loaders
        el.fr.load.hidden = false; el.fr.err.hidden = true; el.fr.empty.hidden = true; el.fr.grid.innerHTML = '';
        el.de.load.hidden = false; el.de.err.hidden = true; el.de.empty.hidden = true; el.de.grid.innerHTML = '';

        const cached = readCache();
        if(cached){
          render(cached, 'fr');
          render(cached, 'de');
          // also refresh in background (no blocking)
          try{
            const fresh = await fetchFirstWorking();
            writeCache(fresh);
            render(fresh, 'fr');
            render(fresh, 'de');
          } catch {}
          return;
        }

        try{
          const items = await fetchFirstWorking();
          writeCache(items);
          render(items, 'fr');
          render(items, 'de');
        } catch(err){
          el.fr.load.hidden = true; el.de.load.hidden = true;
          el.fr.err.hidden = false; el.de.err.hidden = false;
        }
      }

      init();
    })();
  </script>

  <noscript>
    <div class="container" style="margin-top:1rem">
      <div class="news-empty">Activez JavaScript pour afficher les actualités automatiques.</div>
    </div>
  </noscript>
</body>
</html>
